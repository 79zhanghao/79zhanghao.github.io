<!DOCTYPE html>
<html>

	<head>
		
<title>Axios基础语法学习与使用-乔越博客</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/image/favicon.ico">


<meta name="keywords" content="Axios,">
<meta name="description" content="Axios基础语法学习与使用">


<script src="/js/jquery.min.js"></script>



<!-- Baidu Analytics -->
<script defer>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?4b5fe1472f22fa9408e735ea7967bb2a";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


	<meta name="generator" content="Hexo 5.2.0"></head>

	<body>
		
<link rel="stylesheet" href="/css/page.css">

    
<link rel="stylesheet" href="/css/page_cente.css">

        
<link rel="stylesheet" href="/css/atom-one-dark.css">

            
<link rel="stylesheet" href="/css/header.css">

<div class="header">
	<div class="header-top">
		<div class="h-left">
			<a href="/">
				<img src="/image/logo.png" alt="">
			</a>
		</div>
		<div class="h-right">
			<ul>
				
				
				<li>
					<a href="/">HOME</a>
					<span class="dot"></span>
				</li>
				
				
				
				<li>
					<a href="/archives">ARCHIVE</a>
					<span class="dot"></span>
				</li>
				
				
				
				<li>
					<a href="/categories">CATEGORIES</a>
					<span class="dot"></span>
				</li>
				
				
				
				<li>
					<a href="/tags">TAGS</a>
					<span class="dot"></span>
				</li>
				
				
				
				<li>
					<a href="/links">LINKS</a>
					<span class="dot"></span>
				</li>
				
				
				
				<li>
					<a href="/about">ABOUT</a>
					<span class="dot"></span>
				</li>
				
				
			</ul>
		</div>
		<div class="h-right-close">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
				<path fill="none" d="M0 0h24v24H0z" />
				<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
			</svg>
		</div>
	</div>
</div>
<div class="sidebar">
    <div class="topo">
        <h2>CHANGEQ</h2>
    </div>
    <ul>
        
        <li>
            <a href="/">HOME</a>
        </li>
        
        <li>
            <a href="/archives">ARCHIVE</a>
        </li>
        
        <li>
            <a href="/categories">CATEGORIES</a>
        </li>
        
        <li>
            <a href="/tags">TAGS</a>
        </li>
        
        <li>
            <a href="/links">LINKS</a>
        </li>
        
        <li>
            <a href="/about">ABOUT</a>
        </li>
        
    </ul>
    <div class="my_foot">
        
        <a target="_blank" rel="noopener" href="https://github.com/qiaobug">
            <img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
        </a>
        
    </div>
</div>
<div class='shelter'
    style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.5;z-index: 108;'>
</div>
<style>
    .sidebar {
        width: 0;
        height: 100%;
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        background: rgb(255, 255, 255);
        z-index: 999;
        text-align: center;
        box-shadow: -6px 0px 20px rgba(98, 94, 94, 0.815);
    }

    .topo {
        width: 100%;
        height: 200px;
        background: url('https://api.ixiaowai.cn/gqapi/gqapi.php') no-repeat;
        background-size: 100% 100%;
        position: relative;
        display: flex;
        align-items: flex-end;
    }

    .topo h2 {
        color: #fff;
        z-index: 1;
        position: relative;
        margin: 0px 0px 10px 10px;
        font-size: 1.2em;
        box-sizing: border-box;

    }

    .topo:before {
        content: '';
        background-image: url('/image/pattern.png');
        background-repeat: repeat;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 1;
    }



    .sidebar ul {
        width: 100%;
        margin-top: 50px;
    }

    .sidebar ul li {
        height: 50px;
        list-style: none;
        font-size: 1.2em;
        text-align: right;
        margin-right: 10px;

    }

    .sidebar ul li a {
        display: grid;
        color: #5d606a;
        text-overflow: ellipsis;
        width: 100%;
        text-decoration: none;
    }

    .my_foot {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        position: absolute;
        bottom: 0;
    }

    .my_foot a {
        text-decoration: none;
        margin-right: 10px;
        display: inline-block;
    }

    .my_foot a img {
        width: 30px;
        height: 30px;
    }
</style>

<script>
    $(function () { $('.h-right-close>svg').click(function () { $('.sidebar').animate({ width: "66%" }, 500); $('.shelter').fadeIn("slow") }); $('.shelter').click(function (e) { $('.sidebar').animate({ width: "0" }, 500); $('.shelter').fadeOut("slow") }) })
</script>
<script>
	$(function () { $(window).scroll(function () { if ($(document).scrollTop() > 100) { $(".header-top").removeClass("header-move2"); $('.header-top').addClass('header-move1') } else { $(".header-top").removeClass("header-move1"); $('.header-top').addClass('header-move2') } }) });
</script>
                <div class="header-bg bg-content-img">
    <div class="bg-content">
        <ul class="tag">
            
            
            <li><a href="/tags/Axios">Axios</a></li>
            
            
        </ul>
        <h1>Axios基础语法学习与使用</h1>
        <div class="article-info">
            <div class="article-author">
                
                <svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
                    xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
                    <path
                        d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
                        p-id="2902" fill="#ffffff"></path>
                </svg>
                
                <span> <a href="">CHANGEQ</a></span>
                <p>2020-08-29 20:26:38</p>
            </div>
        </div>
    </div>
</div>
                    <div class="article-content">
    <div id="article" class="content">
        <h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><p>axios是一个类库 基于promise管理的ajax库</p>
<h3 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h3><figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//发送一个get请求</span><br>axios.get(<span class="hljs-string">&#x27;/user?ID=12345&#x27;</span>)<br><span class="hljs-comment">//返回的参数 也可以使用 箭头函数</span><br>.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(response);<br>    <span class="hljs-comment">//返回错误信息</span><br>  &#125;).catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(err);<br>  &#125;);<br></code></pre></td></tr></table></figure>

<p>第二种发送get请求方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//发送get请求</span><br>axios.get(<span class="hljs-string">&#x27;/user&#x27;</span>,&#123;<br><span class="hljs-comment">//编写get请求参数</span><br>  params:&#123;<br>    ID:<span class="hljs-number">12345</span><br>  &#125;<br>&#125;)<br><span class="hljs-comment">//返回 结果</span><br>.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>&#123;<br>  <span class="hljs-built_in">console</span>.log(response);<br>&#125;)<br><span class="hljs-comment">//返回错误信息</span><br>.catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>&#123;<br>  <span class="hljs-built_in">console</span>.log(err);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="Post"><a href="#Post" class="headerlink" title="Post"></a>Post</h3><figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//发送post请求</span><br>axios.post(<span class="hljs-string">&#x27;/user&#x27;</span>,&#123;<br>	<span class="hljs-comment">//直接编写参数</span><br>  firstName:<span class="hljs-string">&#x27;Fred&#x27;</span>,<br>  lastName:<span class="hljs-string">&#x27;Flintstone&#x27;</span><br>&#125;,&#123;<br>  <span class="hljs-comment">//这里可以写别的东西</span><br>  <span class="hljs-comment">//比如请求头</span><br>&#125;)<br><span class="hljs-comment">//返回结果</span><br>.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>&#123;<br>  <span class="hljs-built_in">console</span>.log(res);<br>&#125;)<br><span class="hljs-comment">//返回错误</span><br>.catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>&#123;<br>  <span class="hljs-built_in">console</span>.log(err);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="多个请求"><a href="#多个请求" class="headerlink" title="多个请求"></a>多个请求</h3><p>这个也可以 用return的方式解决回调地狱</p>
<h4 id="axios-all"><a href="#axios-all" class="headerlink" title="axios.all([ ])"></a>axios.all([ ])</h4><p>多个请求都完成才做的的事</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//get请求</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserAccount</span>(<span class="hljs-params"></span>)</span>&#123;<br>  <span class="hljs-keyword">return</span> axios.get(<span class="hljs-string">&#x27;/user/12345&#x27;</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserPermissions</span>(<span class="hljs-params"></span>)</span>&#123;<br>  <span class="hljs-keyword">return</span> axios.get(<span class="hljs-string">&#x27;/user/12345/permissions&#x27;</span>);<br>&#125;<br><span class="hljs-comment">//发送多个请求 return返回的请求对象</span><br>axios.all([getUserAccount(),getUserPermissions()])<br><span class="hljs-comment">//返回处理结果</span><br>  .then(axios.spread(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">acct,perms</span>)</span>&#123;<br>    <span class="hljs-comment">//当这两个请求都完成的时候会触发这个函数，两个参数分别代表返回的结果</span><br>  	<span class="hljs-comment">//也可以 .then(res =&gt;&#123;&#125;) res然后存的是两个返回结果的数组</span><br>  &#125;))<br></code></pre></td></tr></table></figure>

<h2 id="axios的API"><a href="#axios的API" class="headerlink" title="axios的API"></a>axios的API</h2><h3 id="axios通过配置（config）来发送请求"><a href="#axios通过配置（config）来发送请求" class="headerlink" title="axios通过配置（config）来发送请求"></a>axios通过配置（<code>config</code>）来发送请求</h3><h4 id="axios-config"><a href="#axios-config" class="headerlink" title="axios(config)"></a>axios(config)</h4><figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//发送一个POST请求</span><br>axios(&#123;<br>    method:<span class="hljs-string">&quot;POST&quot;</span>,<br>    url:<span class="hljs-string">&#x27;/user/12345&#x27;</span>,<br>    data:&#123;<br>        firstName:<span class="hljs-string">&quot;Fred&quot;</span>,<br>        lastName:<span class="hljs-string">&quot;Flintstone&quot;</span><br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="axios-url-config"><a href="#axios-url-config" class="headerlink" title="axios(url[,config])"></a>axios(url[,config])</h4><figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//发送一个 GET 请求（默认的请求方式）</span><br>axios(<span class="hljs-string">&#x27;/user/12345&#x27;</span>);<br></code></pre></td></tr></table></figure>

<h3 id="请求方式"><a href="#请求方式" class="headerlink" title="请求方式"></a>请求方式</h3><p>当我们在使用别名方法的时候，<code>url,method,data</code>这几个参数不需要在配置中声明</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs axios">axios.request(config);<br><br>axios.get(url[,config]);<br><br>axios.delete(url[,config]);<br><br>axios.head(url[,config]);<br><br>axios.post(url[,data[,config]]);<br><br>axios.put(url[,data[,config]])<br><br>axios.patch(url[,data[,config]])<br></code></pre></td></tr></table></figure>

<h4 id="并发请求（concurrency）-即是帮助处理并发请求的辅助函数"><a href="#并发请求（concurrency）-即是帮助处理并发请求的辅助函数" class="headerlink" title="并发请求（concurrency）,即是帮助处理并发请求的辅助函数"></a>并发请求（concurrency）,即是帮助处理并发请求的辅助函数</h4><figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//iterable是一个可以迭代的参数如数组等</span><br>axios.all(iterable)<br><span class="hljs-comment">//callback要等到所有请求都完成才会执行</span><br>axios.spread(callback)<br></code></pre></td></tr></table></figure>

<h3 id="创建一个axios实例，并且可以自定义其配置"><a href="#创建一个axios实例，并且可以自定义其配置" class="headerlink" title="创建一个axios实例，并且可以自定义其配置"></a>创建一个<code>axios</code>实例，并且可以自定义其配置</h3><h4 id="axios-create-config"><a href="#axios-create-config" class="headerlink" title="axios.create([config])"></a>axios.create([config])</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><code class="hljs routeros">var<span class="hljs-built_in"> instance </span>= axios.create(&#123;<br>  baseURL:<span class="hljs-string">&quot;/sss/api/&quot;</span>,<br>  timeout:1000,<br>  headers: &#123;<span class="hljs-string">&#x27;X-Custom-Header&#x27;</span>:<span class="hljs-string">&#x27;foobar&#x27;</span>&#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="实例的方法"><a href="#实例的方法" class="headerlink" title="实例的方法"></a>实例的方法</h4><p>注意已经定义的配置将和利用create创建的实例的配置合并</p>
<figure class="highlight leaf"><table><tr><td class="code"><pre><code class="hljs leaf">axios<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">request</span><span class="hljs-params">(<span class="hljs-variable">config</span>)</span></span><br><br>axios<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-variable">url</span>[,<span class="hljs-variable">config</span>])</span></span><br><br>axios<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">delete</span><span class="hljs-params">(<span class="hljs-variable">url</span>[,<span class="hljs-variable">config</span>])</span></span><br><br>axios<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">head</span><span class="hljs-params">(<span class="hljs-variable">url</span>[,<span class="hljs-variable">config</span>])</span></span><br><br>axios<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">post</span><span class="hljs-params">(<span class="hljs-variable">url</span>[,<span class="hljs-variable">data</span>[,<span class="hljs-variable">config</span>]])</span></span><br><br>axios<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">put</span><span class="hljs-params">(<span class="hljs-variable">url</span>[,<span class="hljs-variable">data</span>[,<span class="hljs-variable">config</span>]])</span></span><br><br>axios<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">patch</span><span class="hljs-params">(<span class="hljs-variable">url</span>[,<span class="hljs-variable">data</span>[,<span class="hljs-variable">config</span>]])</span></span><br></code></pre></td></tr></table></figure>



<h2 id="请求的配置（request-config）"><a href="#请求的配置（request-config）" class="headerlink" title="请求的配置（request config）"></a>请求的配置（request config）</h2><p>可以对一下 config 内的参数进行配置 然后进行发送</p>
<p>url选项是必须进行配置的 需要知道发送给谁 method默认为GET请求</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js">&#123;<br>  <span class="hljs-comment">//`url`是请求的服务器地址</span><br>  url:<span class="hljs-string">&#x27;/user&#x27;</span>,<br>  <span class="hljs-comment">//`method`是请求资源的方式</span><br>  method:<span class="hljs-string">&#x27;get&#x27;</span><span class="hljs-comment">//default</span><br>  <span class="hljs-comment">//如果`url`不是绝对地址，那么`baseURL`将会加到`url`的前面</span><br>  <span class="hljs-comment">//当`url`是相对地址的时候，设置`baseURL`会非常的方便</span><br>  baseURL:<span class="hljs-string">&#x27;https://some-domain.com/api/&#x27;</span>,<br>  <span class="hljs-comment">//`transformRequest`选项允许我们在请求发送到服务器之前对请求的数据做出一些改动</span><br>  <span class="hljs-comment">//该选项只适用于以下请求方式：`put/post/patch`</span><br>  <span class="hljs-comment">//数组里面的最后一个函数必须返回一个字符串、-一个`ArrayBuffer`或者`Stream`</span><br>  transformRequest:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>&#123;<br>    <span class="hljs-comment">//在这里根据自己的需求改变数据</span><br>    <span class="hljs-keyword">return</span> data;<br>  &#125;],<br>  <span class="hljs-comment">//`transformResponse`选项允许我们在数据传送到`then/catch`方法之前对数据进行改动</span><br>  transformResponse:[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>&#123;<br>    <span class="hljs-comment">//在这里根据自己的需求改变数据</span><br>    <span class="hljs-keyword">return</span> data;<br>  &#125;],<br>  <span class="hljs-comment">//`headers`选项是需要被发送的自定义请求头信息</span><br>  headers: &#123;<span class="hljs-string">&#x27;X-Requested-With&#x27;</span>:<span class="hljs-string">&#x27;XMLHttpRequest&#x27;</span>&#125;,<br>  <span class="hljs-comment">//`params`选项是要随请求一起发送的请求参数----一般链接在URL后面</span><br>  <span class="hljs-comment">//他的类型必须是一个纯对象或者是URLSearchParams对象</span><br>  params: &#123;<br>    ID:<span class="hljs-number">12345</span><br>  &#125;,<br>  <span class="hljs-comment">//`paramsSerializer`是一个可选的函数，起作用是让参数（params）序列化</span><br>  <span class="hljs-comment">//例如(https://www.npmjs.com/package/qs,http://api.jquery.com/jquery.param)</span><br>  paramsSerializer: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">params</span>)</span>&#123;<br>    <span class="hljs-keyword">return</span> Qs.stringify(params,&#123;<span class="hljs-attr">arrayFormat</span>:<span class="hljs-string">&#x27;brackets&#x27;</span>&#125;)<br>  &#125;,<br>  <span class="hljs-comment">//`data`选项是作为一个请求体而需要被发送的数据</span><br>  <span class="hljs-comment">//该选项只适用于方法：`put/post/patch`</span><br>  <span class="hljs-comment">//当没有设置`transformRequest`选项时dada必须是以下几种类型之一</span><br>  <span class="hljs-comment">//string/plain/object/ArrayBuffer/ArrayBufferView/URLSearchParams</span><br>  <span class="hljs-comment">//仅仅浏览器：FormData/File/Bold</span><br>  <span class="hljs-comment">//仅node:Stream</span><br>  data &#123;<br>    firstName:<span class="hljs-string">&quot;Fred&quot;</span><br>  &#125;,<br>  <span class="hljs-comment">//`timeout`选项定义了请求发出的延迟毫秒数</span><br>  <span class="hljs-comment">//如果请求花费的时间超过延迟的时间，那么请求会被终止</span><br><br>  timeout:<span class="hljs-number">1000</span>,<br>  <span class="hljs-comment">//`withCredentails`选项表明了是否是跨域请求</span><br>  <br>  withCredentials:<span class="hljs-literal">false</span>,<span class="hljs-comment">//default</span><br>  <span class="hljs-comment">//`adapter`适配器选项允许自定义处理请求，这会使得测试变得方便</span><br>  <span class="hljs-comment">//返回一个promise,并提供验证返回</span><br>  adapter: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>)</span>&#123;<br>    <span class="hljs-comment">/*..........*/</span><br>  &#125;,<br>  <span class="hljs-comment">//`auth`表明HTTP基础的认证应该被使用，并提供证书</span><br>  <span class="hljs-comment">//这会设置一个authorization头（header）,并覆盖你在header设置的Authorization头信息</span><br>  auth: &#123;<br>    username:<span class="hljs-string">&quot;zhangsan&quot;</span>,<br>    password: <span class="hljs-string">&quot;s00sdkf&quot;</span><br>  &#125;,<br>  <span class="hljs-comment">//返回数据的格式</span><br>  <span class="hljs-comment">//其可选项是arraybuffer,blob,document,json,text,stream</span><br>  responseType:<span class="hljs-string">&#x27;json&#x27;</span>,<span class="hljs-comment">//default</span><br>  <span class="hljs-comment">//</span><br>  xsrfCookieName: <span class="hljs-string">&#x27;XSRF-TOKEN&#x27;</span>,<span class="hljs-comment">//default</span><br>  xsrfHeaderName:<span class="hljs-string">&#x27;X-XSRF-TOKEN&#x27;</span>,<span class="hljs-comment">//default</span><br>  <span class="hljs-comment">//`onUploadProgress`上传进度事件</span><br>  onUploadProgress:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">progressEvent</span>)</span>&#123;<br>    <span class="hljs-comment">//下载进度的事件</span><br>onDownloadProgress:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">progressEvent</span>)</span>&#123;<br>&#125;<br>  &#125;,<br>  <span class="hljs-comment">//相应内容的最大值</span><br>  maxContentLength:<span class="hljs-number">2000</span>,<br>  <span class="hljs-comment">//`validateStatus`定义了是否根据http相应状态码，来resolve或者reject promise</span><br>  <span class="hljs-comment">//如果`validateStatus`返回true(或者设置为`null`或者`undefined`),那么promise的状态将会是resolved,否则其状态就是rejected</span><br>  validateStatus:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status</span>)</span>&#123;<br>    <span class="hljs-keyword">return</span> status &gt;= <span class="hljs-number">200</span> &amp;&amp; status &lt;<span class="hljs-number">300</span>;<span class="hljs-comment">//default</span><br>  &#125;,<br>  <span class="hljs-comment">//`maxRedirects`定义了在nodejs中重定向的最大数量</span><br>  maxRedirects: <span class="hljs-number">5</span>,<span class="hljs-comment">//default</span><br>  <span class="hljs-comment">//`httpAgent/httpsAgent`定义了当发送http/https请求要用到的自定义代理</span><br>  <span class="hljs-comment">//keeyAlive在选项中没有被默认激活</span><br>  httpAgent: <span class="hljs-keyword">new</span> http.Agent(&#123;<span class="hljs-attr">keeyAlive</span>:<span class="hljs-literal">true</span>&#125;),<br>  httpsAgent: <span class="hljs-keyword">new</span> https.Agent(&#123;<span class="hljs-attr">keeyAlive</span>:<span class="hljs-literal">true</span>&#125;),<br>  <span class="hljs-comment">//proxy定义了主机名字和端口号，</span><br>  <span class="hljs-comment">//`auth`表明http基本认证应该与proxy代理链接，并提供证书</span><br>  <span class="hljs-comment">//这将会设置一个`Proxy-Authorization` header,并且会覆盖掉已经存在的`Proxy-Authorization`  header</span><br>  proxy: &#123;<br>    host:<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,<br>    port: <span class="hljs-number">9000</span>,<br>    auth: &#123;<br>      username:<span class="hljs-string">&#x27;skda&#x27;</span>,<br>      password:<span class="hljs-string">&#x27;radsd&#x27;</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">//`cancelToken`定义了一个用于取消请求的cancel token</span><br>  <span class="hljs-comment">//详见cancelation部分</span><br>  cancelToken: <span class="hljs-keyword">new</span> cancelToken(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cancel</span>)</span>&#123;<br><br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="请求返回内容"><a href="#请求返回内容" class="headerlink" title="请求返回内容"></a>请求返回内容</h2><figure class="highlight"><table><tr><td class="code"><pre><code class="hljs json">&#123;<br><br>  data:&#123;&#125;,<br>  status:200,<br>  <span class="hljs-comment">//从服务器返回的http状态文本</span><br>  statusText:&#x27;OK&#x27;,<br>  <span class="hljs-comment">//响应头信息</span><br>  headers: &#123;&#125;,<br>  <span class="hljs-comment">//`config`是在请求的时候的一些配置信息</span><br>  config: &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>通过上方的格式我们可以得到 下面获取数据的方法</p>
<p>这样可以更加清晰的调用出你想使用的数据了</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js">axios.get(<span class="hljs-string">&#x27;/user/12345&#x27;</span>)<br>  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(res.data);<br>    <span class="hljs-built_in">console</span>.log(res.status);<br>    <span class="hljs-built_in">console</span>.log(res.statusText);<br>    <span class="hljs-built_in">console</span>.log(res.headers);<br>    <span class="hljs-built_in">console</span>.log(res.config);<br>  &#125;)<br></code></pre></td></tr></table></figure>

<h2 id="默认配置"><a href="#默认配置" class="headerlink" title="默认配置"></a>默认配置</h2><h3 id="全局默认配置"><a href="#全局默认配置" class="headerlink" title="全局默认配置"></a>全局默认配置</h3><figure class="highlight prolog"><table><tr><td class="code"><pre><code class="hljs prolog">axios.defaults.baseURL = <span class="hljs-string">&#x27;http://api.exmple.com&#x27;</span>;<br>axios.defaults.headers.common[<span class="hljs-string">&#x27;Authorization&#x27;</span>] = <span class="hljs-symbol">AUTH_TOKEN</span>;<br>axios.defaults.headers.post[<span class="hljs-string">&#x27;content-Type&#x27;</span>] = <span class="hljs-string">&#x27;appliction/x-www-form-urlencoded&#x27;</span>;<br></code></pre></td></tr></table></figure>

<figure class="highlight fix"><table><tr><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">axios.defaults.加名字 </span>=<span class="hljs-string"> 值</span><br></code></pre></td></tr></table></figure>

<h3 id="自定义配置"><a href="#自定义配置" class="headerlink" title="自定义配置"></a>自定义配置</h3><figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//当创建实例的时候配置默认配置</span><br><span class="hljs-comment">//在创建这个请求的时候就在里面进行配置了</span><br><span class="hljs-keyword">var</span> instance = axios.create(&#123;<br>    baseURL: <span class="hljs-string">&#x27;https://api.example.com&#x27;</span><br>&#125;);<br><br><span class="hljs-comment">//当实例创建时候修改配置</span><br>instance.defaults.headers.common[<span class="hljs-string">&quot;Authorization&quot;</span>] = AUTH_TOKEN;<br></code></pre></td></tr></table></figure>

<h3 id="配置优先级"><a href="#配置优先级" class="headerlink" title="配置优先级"></a>配置优先级</h3><p>config配置将会以优先级别来合并，顺序是lib/defauts.js中的默认配置，然后是实例中的默认配置，最后是请求中的config参数的配置，越往后等级越高，后面的会覆盖前面的例子。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//创建一个实例的时候会使用libray目录中的默认配置</span><br><span class="hljs-comment">//在这里timeout配置的值为0，来自于libray的默认值</span><br><span class="hljs-keyword">var</span> instance = axios.create();<br><span class="hljs-comment">//回覆盖掉library的默认值</span><br><span class="hljs-comment">//现在所有的请求都要等2.5S之后才会发出</span><br>instance.defaults.timeout = <span class="hljs-number">2500</span>;<br><span class="hljs-comment">//这里的timeout回覆盖之前的2.5S变成5s</span><br>instance.get(<span class="hljs-string">&#x27;/longRequest&#x27;</span>,&#123;<br>  timeout: <span class="hljs-number">5000</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><p>你可以在请求、响应在到达<code>then/catch</code>之前拦截他们</p>
<p>通俗的说就是  </p>
<ol>
<li>发送请求的时候先给你进行处理后 在发送</li>
<li>接收数据的时候 先到你那里处理完成后再进行返回</li>
</ol>
<p>简单的说可以理解为 学校的门卫 在疫情期间 你想进入学校 需要在拿着学生证然后他给拦截下来 给你测体温符合的进入 </p>
<p>你想出去的时候需要资料数据都在正确才能出去</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//添加一个请求拦截器</span><br>axios.interceptors.request.use(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>)</span>&#123;<br>  <span class="hljs-comment">//在请求发出之前进行一些操作</span><br>  <span class="hljs-keyword">return</span> config;<br>&#125;,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>&#123;<br>  <span class="hljs-comment">//Do something with request error</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);<br>&#125;);<br><span class="hljs-comment">//添加一个响应拦截器</span><br>axios.interceptors.response.use(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>&#123;<br>  <span class="hljs-comment">//在这里对返回的数据进行处理</span><br>  <span class="hljs-keyword">return</span> res;<br>&#125;,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>&#123;<br>  <span class="hljs-comment">//Do something with response error</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);<br>&#125;)<br></code></pre></td></tr></table></figure>

<h4 id="取消拦截器"><a href="#取消拦截器" class="headerlink" title="取消拦截器"></a>取消拦截器</h4><figure class="highlight php"><table><tr><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">var</span> myInterceptor = axios.interceptor.request.<span class="hljs-keyword">use</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<span class="hljs-comment">/*....*/</span>&#125;);<br>axios.interceptors.request.eject(myInterceptor);<br></code></pre></td></tr></table></figure>

<h4 id="给自定义的axios实例添加拦截器"><a href="#给自定义的axios实例添加拦截器" class="headerlink" title="给自定义的axios实例添加拦截器"></a>给自定义的axios实例添加拦截器</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><code class="hljs routeros">var<span class="hljs-built_in"> instance </span>= axios.create();<br>instance.interceptors.request.use(function()&#123;&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js">axios.get(<span class="hljs-string">&#x27;/user/12345&#x27;</span>)<br>  .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>)</span>&#123;<br>    <span class="hljs-keyword">if</span>(error.response)&#123;<br>      <span class="hljs-comment">//请求已经发出，但是服务器响应返回的状态吗不在2xx的范围内</span><br>      <span class="hljs-built_in">console</span>.log(error.response.data);<br>      <span class="hljs-built_in">console</span>.log(error.response.status);<br>      <span class="hljs-built_in">console</span>.log(error.response.header);<br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">//一些错误是在设置请求的时候触发</span><br>      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Error&#x27;</span>,error.message);<br>    &#125;<br>    <span class="hljs-built_in">console</span>.log(error.config);<br>  &#125;);<br></code></pre></td></tr></table></figure>

<h2 id="取消请求"><a href="#取消请求" class="headerlink" title="取消请求"></a>取消请求</h2><h4 id="你可以通过一个cancel-token来取消一个请求"><a href="#你可以通过一个cancel-token来取消一个请求" class="headerlink" title="你可以通过一个cancel token来取消一个请求"></a>你可以通过一个<code>cancel token</code>来取消一个请求</h4><ol>
<li>你可以通过<code>CancelToken.source</code>工厂函数来创建一个<code>cancel token</code></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> CancelToken = axios.CancelToken;<br><span class="hljs-keyword">var</span> source = CancelToken.source();<br><br>axios.get(<span class="hljs-string">&#x27;/user/12345&#x27;</span>,&#123;<br>  cancelToken: source.token<br>&#125;).catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">thrown</span>)</span>&#123;<br>  <span class="hljs-keyword">if</span>(axios.isCancel(thrown))&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Request canceled&#x27;</span>,thrown.message);<br>  &#125;<span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">//handle error</span><br>  &#125;<br>&#125;);<br><br><span class="hljs-comment">//取消请求（信息的参数可以设置的）</span><br>source.cance(<span class="hljs-string">&quot;操作被用户取消&quot;</span>);<br><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>你可以给cancelToken构造函数传递一个executor function来创建一个cancel token:</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> cancelToken = axios.CancelToken;<br><span class="hljs-keyword">var</span> cance;<br>axios.get(<span class="hljs-string">&#x27;/user/12345&#x27;</span>,&#123;<br>  cancelToken: <span class="hljs-keyword">new</span> CancelToken(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>)</span>&#123;<br>    <span class="hljs-comment">//这个executor函数接受一个cancel function作为参数</span><br>    cancel = c;<br>  &#125;)<br>&#125;)<br><span class="hljs-comment">//取消请求</span><br>cancel();<br></code></pre></td></tr></table></figure>


    </div>
</div>
<style>
    #noneimg img {
        display: none;
        z-index: 109;
        width: 600px !important;
        border-radius: 0px;
        position: fixed;
        box-shadow: 0 0 0px #c3c3c300 !important;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin: auto !important;
    }

    @media screen and (max-width:600px) {
        #noneimg img {
            width: 88%
        }
    }
</style>
<script>
    $(function () {
        $('#article').click(function (e) {
            if (e.target.tagName == "IMG") {
                if ($('#nonediv').length == 0) {
                    let MImg = `<div id='noneimg'><img src='${e.target.currentSrc}'></div>`;
                    let MDiv = "<div id='nonediv' style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.5;z-index: 108;'></div>";
                    $('#article').append(MDiv);
                    $('#article').append(MImg);
                    $("#nonediv").fadeIn("slow");
                    $("#noneimg img").fadeIn("slow");
                }
            } else {
                if ($('#nonediv').length !== 0) {
                    $("#noneimg ").fadeOut("slow");
                    $("#nonediv").fadeOut("slow");
                    setTimeout(function () {
                        $('#nonediv').remove();
                        $('#noneimg').remove();
                    }, 500);
                }
            }
        });
        $('.article-content').addClass('content-move')
    });
</script>
                        <div class="Last-Next">
    
    <a href="/article/d3b12b7964be3801/">
        <div class="last">
            <span>上一篇</span>
            <p>Fetch基础语法学习与使用</p>
        </div>
    </a>
    

    
    <a href="/article/040d89d8535e0026/">
        <div class="next">
            <span>下一篇</span>
            <p>百度OCR对接实现高精度文字识别OCRAPI和解决各种坑</p>
        </div>
    </a>
    
</div>
		
<link rel="stylesheet" href="/css/food.css">

<div class="footer">
	<div class="Copyright">
		©2021 By CHANGEQ. 主题：<a
			style="text-decoration: none;display: contents; color: #898F9F;"
			target="_blank" rel="noopener" href="https://github.com/qiaobug/hexo-theme-quiet">Quiet</a>
	</div>
	<div class="contact">
		
		<a target="_blank" rel="noopener" href="https://github.com/qiaobug">
			<img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
		</a>
		
	</div>
</div>

<script src="/js/jquery.min.js"></script>


<script src="/js/gotop.js"></script>


<style type="text/css">
    @media screen and (min-width: 600px) {
        .goTop>span {
            display: block;
            border-radius: 50%;
            width: 66px;
            height: 66px;
            cursor: pointer;
            opacity: 0.8;
            background: rgba(18, 24, 58, 0.06);
            text-align: center;
            border: 1px solid rgba(18, 24, 58, 0.06);

            transition: border .5s;
            -moz-transition: border .5s;
            /* Firefox 4 */
            -webkit-transition: border .5s;
            /* Safari 和 Chrome */
            -o-transition: border .5s;
            /* Opera */
        }

        .goTop>span:hover {
            border: 1px solid #6680B3;
        }


        .goTop {
            position: fixed;
            right: 30px;
            bottom: 80px;
        }

        .goTop>span>svg {
            width: 30px;
            height: 30px;
            margin-top: 17.5px;
            opacity: 0.7;
        }

    }

    @media screen and (max-width: 600px) {
        .goTop {
            display: none;
        }
    }
</style>
<div class="goTop" id="js-go_top">
    <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g>
                <path d="M13 12v8h-2v-8H4l8-8 8 8z"></path>
            </g>
        </svg>
    </span>
</div>
<script>
    $('#js-go_top').gotoTop({ offset: 500, speed: 300, animationShow: { 'transform': 'translate(0,0)', 'transition': 'transform .5s ease-in-out' }, animationHide: { 'transform': 'translate(100px,0)', 'transition': 'transform .5s ease-in-out' } });
</script>
<script>
	console.log('\n %c Hexo-Quiet 主题 %c https://github.com/QiaoBug/hexo-theme-quiet \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
</script>
	</body>

</html>